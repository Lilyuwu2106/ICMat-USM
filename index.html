<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla ICM USM 2025 - Dise√±o Moderno</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .aprobado { background-color: #a4f5a4; color: #000; }
    .desbloqueado { background-color: #aee0f8; color: #000; }
    .bloqueado { background-color: #e5e5e5; color: #000; }
  </style>
</head>
<body class="bg-gray-100 p-6">
  <main>
    <h1 class="text-3xl font-bold mb-6 text-blue-800">Malla Ingenier√≠a Civil Matem√°tica ‚Äì USM 2025</h1>

    <div class="mb-6 flex gap-6 items-center">
      <div><span class="inline-block w-4 h-4 bg-[#a4f5a4] mr-2"></span>Aprobado</div>
      <div><span class="inline-block w-4 h-4 bg-[#aee0f8] mr-2"></span>Desbloqueado</div>
      <div><span class="inline-block w-4 h-4 bg-[#e5e5e5] mr-2"></span>Bloqueado</div>
    </div>

    <button onclick="resetearMalla()" class="mb-6 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
      Reiniciar Malla
    </button>

    <div id="malla" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </main>

  <script>
    const semestres = {
      1: [
        {sigla: "HCW101", nombre: "Ingl√©s 1", estado: "desbloqueado"},
        {sigla: "EFI200", nombre: "Educaci√≥n F√≠sica 1", estado: "desbloqueado"},
        {sigla: "IWG400", nombre: "Proyecto Inicial", estado: "desbloqueado"},
        {sigla: "FIS100", nombre: "Introducci√≥n a la F√≠sica", estado: "desbloqueado"},
        {sigla: "MAT070", nombre: "Introducci√≥n al C√°lculo", estado: "desbloqueado"},
        {sigla: "MAT060", nombre: "√Ålgebra y Geometr√≠a", estado: "desbloqueado"},
      ],
      2: [
        {sigla: "HCW102", nombre: "Ingl√©s 2", estado: "bloqueado"},
        {sigla: "EFI201", nombre: "Educaci√≥n F√≠sica 2", estado: "bloqueado"},
        {sigla: "IWI401", nombre: "Introducci√≥n a la Programaci√≥n", estado: "desbloqueado"},
        {sigla: "FIS101", nombre: "F√≠sica General ‚Äì Mec√°nica", estado: "bloqueado"},
        {sigla: "MAT071", nombre: "C√°lculo en una Variable", estado: "bloqueado"},
        {sigla: "MAT061", nombre: "√Ålgebra Lineal", estado: "bloqueado"},
      ],
      3: [
        {sigla: "HCW103", nombre: "Ingl√©s 3", estado: "bloqueado"},
        {sigla: "MAT201", nombre: "Introducci√≥n a la Matem√°tica Avanzada", estado: "bloqueado"},
        {sigla: "FIS102", nombre: "Calor y Ondas", estado: "bloqueado"},
        {sigla: "MAT072", nombre: "C√°lculo de Varias Variables", estado: "bloqueado"},
        {sigla: "EDE101", nombre: "Ecuaciones Diferenciales Elementales", estado: "bloqueado"},
        {sigla: "PROG201", nombre: "Programaci√≥n Avanzada en Ciencias", estado: "bloqueado"},
      ],
      4: [
        {sigla: "ESP101", nombre: "Comunicaci√≥n Efectiva en Espa√±ol", estado: "bloqueado"},
        {sigla: "MAT301", nombre: "An√°lisis Real", estado: "bloqueado"},
        {sigla: "MAT302", nombre: "√Ålgebra Lineal Avanzada", estado: "bloqueado"},
        {sigla: "MAT303", nombre: "C√°lculo Avanzado para Ingenier√≠a", estado: "bloqueado"},
        {sigla: "FIS201", nombre: "Electricidad y Magnetismo", estado: "bloqueado"},
        {sigla: "EST101", nombre: "Probabilidad y Estad√≠stica", estado: "bloqueado"},
      ],
      5: [
        {sigla: "ADM101", nombre: "Administraci√≥n y Sostenibilidad Organizacional", estado: "bloqueado"},
        {sigla: "MAT401", nombre: "An√°lisis", estado: "bloqueado"},
        {sigla: "EDE201", nombre: "Ecuaciones Diferenciales y Sistemas Din√°micos", estado: "bloqueado"},
        {sigla: "MAT402", nombre: "√Ålgebra y Matem√°tica Discreta", estado: "bloqueado"},
        {sigla: "OPT101", nombre: "Optimizaci√≥n Lineal", estado: "bloqueado"},
        {sigla: "COMU201", nombre: "Pr√°ctica en Acci√≥n Comunitaria", estado: "bloqueado"},
      ],
      6: [
        {sigla: "ESP201", nombre: "Comunicaci√≥n Efectiva", estado: "bloqueado"},
        {sigla: "ECO201", nombre: "Ingenier√≠a Econ√≥mica", estado: "bloqueado"},
        {sigla: "ANI101", nombre: "An√°lisis Num√©rico", estado: "bloqueado"},
        {sigla: "EST201", nombre: "Modelamiento Estad√≠stico", estado: "bloqueado"},
        {sigla: "MED101", nombre: "Teor√≠a de la Medida", estado: "bloqueado"},
        {sigla: "OPT201", nombre: "Optimizaci√≥n No Lineal", estado: "bloqueado"},
      ],
      7: [
        {sigla: "HCW401", nombre: "Ingl√©s Disciplinar", estado: "bloqueado"},
        {sigla: "PROY101", nombre: "Gesti√≥n de Preferencias de Proyectos", estado: "bloqueado"},
        {sigla: "ANI201", nombre: "An√°lisis Num√©rico 2", estado: "bloqueado"},
        {sigla: "MAT501", nombre: "An√°lisis Funcional", estado: "bloqueado"},
        {sigla: "LAB101", nombre: "Laboratorio de Modelaci√≥n 1", estado: "bloqueado"},
        {sigla: "DAD101", nombre: "An√°lisis y Ciencia de Datos", estado: "bloqueado"},
      ],
      8: [
        {sigla: "EDP101", nombre: "Ecuaciones Diferenciales Parciales", estado: "bloqueado"},
        {sigla: "ANI301", nombre: "An√°lisis Num√©rico de EDP", estado: "bloqueado"},
        {sigla: "EST301", nombre: "Inferencia Estad√≠stica", estado: "bloqueado"},
        {sigla: "OPT301", nombre: "Optimizaci√≥n y Control", estado: "bloqueado"},
        {sigla: "LAB201", nombre: "Laboratorio de Modelaci√≥n 2", estado: "bloqueado"},
      ],
      9: [
        {sigla: "ELEC1", nombre: "Electivo 1", estado: "bloqueado"},
        {sigla: "PROY102", nombre: "Gesti√≥n de Preferencias de Innovaci√≥n", estado: "bloqueado"},
        {sigla: "ELEC2", nombre: "Electivo 2", estado: "bloqueado"},
        {sigla: "ELEC3", nombre: "Electivo 3", estado: "bloqueado"},
        {sigla: "TIT1", nombre: "Proyecto de Titulaci√≥n ‚Äì Parte 1", estado: "bloqueado"},
      ],
      10: [
        {sigla: "ELEC4", nombre: "Electivo 4", estado: "bloqueado"},
        {sigla: "EMP101", nombre: "Gesti√≥n de Emprendimiento", estado: "bloqueado"},
        {sigla: "ELEC5", nombre: "Electivo 5", estado: "bloqueado"},
        {sigla: "ELEC6", nombre: "Electivo 6", estado: "bloqueado"},
        {sigla: "TIT2", nombre: "Proyecto de Titulaci√≥n ‚Äì Parte 2", estado: "bloqueado"},
      ],
    };

    const estados = ["desbloqueado", "aprobado", "bloqueado"];
    const simbolos = {
      "desbloqueado": "üü¶",
      "aprobado": "üü©",
      "bloqueado": "‚ö™Ô∏è"
    };

    function cargarEstado(sigla, defaultEstado) {
      return localStorage.getItem(`malla-${sigla}`) ?? defaultEstado;
    }

    function guardarEstado(sigla, estado) {
      localStorage.setItem(`malla-${sigla}`, estado);
    }

    function toggleEstado(element, sigla) {
      let current = element.dataset.estado;
      let index = estados.indexOf(current);
      index = (index + 1) % estados.length;
      const nuevoEstado = estados[index];

      element.classList.remove(current);
      element.classList.add(nuevoEstado);
      element.dataset.estado = nuevoEstado;
      element.querySelector(".estado-icon").textContent = simbolos[nuevoEstado];
      guardarEstado(sigla, nuevoEstado);
    }

    function renderizarMalla() {
      const contenedor = document.getElementById("malla");
      contenedor.innerHTML = "";

      for (const [semestre, ramos] of Object.entries(semestres)) {
        const section = document.createElement("section");
        section.className = "col-span-full";

        const titulo = document.createElement("h2");
        titulo.textContent = `Semestre ${semestre}`;
        titulo.className = "text-xl font-semibold mt-8 mb-4 text-blue-700";
        section.appendChild(titulo);

        ramos.forEach(({sigla, nombre, estado: estadoInicial}) => {
          const estado = cargarEstado(sigla, estadoInicial);
          const tarjeta = document.createElement("div");
          tarjeta.classList.add(estado, "p-4", "rounded-lg", "shadow", "cursor-pointer", "hover:shadow-lg", "transition", "duration-300");
          tarjeta.dataset.estado = estado;

          tarjeta.onclick = () => toggleEstado(tarjeta, sigla);

          tarjeta.innerHTML = `
            <h3 class="text-lg font-bold text-gray-700">${sigla} - ${nombre}</h3>
            <p class="mt-2">Estado: <span class="estado-icon">${simbolos[estado]}</span></p>
          `;
          section.appendChild(tarjeta);
        });

        contenedor.appendChild(section);
      }
    }

    function resetearMalla() {
      for (const ramos of Object.values(semestres)) {
        ramos.forEach(({sigla}) => localStorage.removeItem(`malla-${sigla}`));
      }
      renderizarMalla();
    }

    window.onload = renderizarMalla;
  </script>
</body>
</html>
